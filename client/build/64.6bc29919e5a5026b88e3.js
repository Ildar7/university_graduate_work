!(function () { try { const e = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {}; const t = (new Error()).stack; t && (e._sentryDebugIds = e._sentryDebugIds || {}, e._sentryDebugIds[t] = '91e2e866-e571-4f9a-a50b-ed2dbfa0ff53', e._sentryDebugIdIdentifier = 'sentry-dbid-91e2e866-e571-4f9a-a50b-ed2dbfa0ff53'); } catch (e) {} }()); const _global = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {}; _global.SENTRY_RELEASE = { id: '45ee1168f5cf48e9753bace26323152d3b61cb67' }, (self.webpackChunkproduction_project = self.webpackChunkproduction_project || []).push([[64], {
    5131: (e, t, s) => {
        s.d(t, { Z: () => c }); let r; let a; const n = s(7294); function l() { return l = Object.assign ? Object.assign.bind() : function (e) { for (let t = 1; t < arguments.length; t++) { const s = arguments[t]; for (const r in s)Object.prototype.hasOwnProperty.call(s, r) && (e[r] = s[r]); } return e; }, l.apply(this, arguments); } const c = function (e) {
            return n.createElement('svg', l({
                width: 20, height: 20, fill: 'none', xmlns: 'http://www.w3.org/2000/svg',
            }, e), r || (r = n.createElement('path', { d: 'M7.5 3.75h-.833c-1.965 0-2.947 0-3.557.61-.61.61-.61 1.592-.61 3.557v4.166c0 1.964 0 2.946.61 3.557.61.61 1.592.61 3.557.61H7.5m0-10.853c0-1.911 0-2.867.59-3.39.588-.522 1.49-.365 3.29-.051l1.942.339c1.996.347 2.993.522 3.585 1.253.593.733.593 1.791.593 3.909v5.087c0 2.117 0 3.175-.592 3.908-.593.731-1.591.905-3.586 1.254l-1.94.338c-1.802.314-2.703.471-3.292-.052-.59-.522-.59-1.478-.59-3.389V5.397Z', stroke: '#fff', strokeWidth: 1.5 })), a || (a = n.createElement('path', {
                d: 'M10 9.167v1.666', stroke: '#fff', strokeWidth: 1.5, strokeLinecap: 'round',
            })));
        };
    },
    64: (e, t, s) => {
        s.r(t), s.d(t, { default: () => B }); const r = s(5893); const a = s(4387); const n = s(7294); const l = s(1150); const c = s(918); const o = s(7168); const i = (0, o.hg)('subjectsScheduleWorkload/fetchSubjectsScheduleWorkloadTeachers', ((e, t) => {
            let s; let r; let a; let n; const l = e[0]; const c = e[1]; return s = void 0, r = void 0, n = function () {
                let e; let s; let r; return (function (e, t) {
                    let s; let r; let a; let n; let l = {
                        label: 0, sent() { if (1 & a[0]) throw a[1]; return a[1]; }, trys: [], ops: [],
                    }; return n = { next: c(0), throw: c(1), return: c(2) }, typeof Symbol === 'function' && (n[Symbol.iterator] = function () { return this; }), n; function c(c) { return function (o) { return (function (c) { if (s) throw new TypeError('Generator is already executing.'); for (;n && (n = 0, c[0] && (l = 0)), l;) try { if (s = 1, r && (a = 2 & c[0] ? r.return : c[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, c[1])).done) return a; switch (r = 0, a && (c = [2 & c[0], a.value]), c[0]) { case 0: case 1: a = c; break; case 4: return l.label++, { value: c[1], done: !1 }; case 5: l.label++, r = c[1], c = [0]; continue; case 7: c = l.ops.pop(), l.trys.pop(); continue; default: if (!((a = (a = l.trys).length > 0 && a[a.length - 1]) || c[0] !== 6 && c[0] !== 2)) { l = 0; continue; } if (c[0] === 3 && (!a || c[1] > a[0] && c[1] < a[3])) { l.label = c[1]; break; } if (c[0] === 6 && l.label < a[1]) { l.label = a[1], a = c; break; } if (a && l.label < a[2]) { l.label = a[2], l.ops.push(c); break; }a[2] && l.ops.pop(), l.trys.pop(); continue; }c = t.call(e, l); } catch (e) { c = [6, e], r = 0; } finally { s = a = 0; } if (5 & c[0]) throw c[1]; return { value: c[0] ? c[1] : void 0, done: !0 }; }([c, o])); }; }
                }(this, ((a) => { switch (a.label) { case 0: e = t.rejectWithValue, s = t.extra, a.label = 1; case 1: return a.trys.push([1, 3,, 4]), [4, s.api.get('/curriculum/subject-schedule/'.concat(l, '/').concat(c, '/teacher-workload/'))]; case 2: return [2, a.sent().data]; case 3: return (r = a.sent()).message === 'Failed to fetch' ? [2, e({ status: 500, error: 'timeout' })] : [2, e({ status: r.response.status, error: r.response.data.message })]; case 4: return [2]; } })));
            }, new ((a = void 0) || (a = Promise))(((e, t) => { function l(e) { try { o(n.next(e)); } catch (e) { t(e); } } function c(e) { try { o(n.throw(e)); } catch (e) { t(e); } } function o(t) { let s; t.done ? e(t.value) : (s = t.value, s instanceof a ? s : new a(((e) => { e(s); }))).then(l, c); }o((n = n.apply(s, r || [])).next()); }));
        })); const d = (0, o.hg)('subjectsScheduleWorkload/fetchSubjectsScheduleWorkloadClassRooms', ((e, t) => {
            let s; let r; let a; let n; const l = e[0]; const c = e[1]; return s = void 0, r = void 0, n = function () {
                let e; let s; let r; return (function (e, t) {
                    let s; let r; let a; let n; let l = {
                        label: 0, sent() { if (1 & a[0]) throw a[1]; return a[1]; }, trys: [], ops: [],
                    }; return n = { next: c(0), throw: c(1), return: c(2) }, typeof Symbol === 'function' && (n[Symbol.iterator] = function () { return this; }), n; function c(c) { return function (o) { return (function (c) { if (s) throw new TypeError('Generator is already executing.'); for (;n && (n = 0, c[0] && (l = 0)), l;) try { if (s = 1, r && (a = 2 & c[0] ? r.return : c[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, c[1])).done) return a; switch (r = 0, a && (c = [2 & c[0], a.value]), c[0]) { case 0: case 1: a = c; break; case 4: return l.label++, { value: c[1], done: !1 }; case 5: l.label++, r = c[1], c = [0]; continue; case 7: c = l.ops.pop(), l.trys.pop(); continue; default: if (!((a = (a = l.trys).length > 0 && a[a.length - 1]) || c[0] !== 6 && c[0] !== 2)) { l = 0; continue; } if (c[0] === 3 && (!a || c[1] > a[0] && c[1] < a[3])) { l.label = c[1]; break; } if (c[0] === 6 && l.label < a[1]) { l.label = a[1], a = c; break; } if (a && l.label < a[2]) { l.label = a[2], l.ops.push(c); break; }a[2] && l.ops.pop(), l.trys.pop(); continue; }c = t.call(e, l); } catch (e) { c = [6, e], r = 0; } finally { s = a = 0; } if (5 & c[0]) throw c[1]; return { value: c[0] ? c[1] : void 0, done: !0 }; }([c, o])); }; }
                }(this, ((a) => { switch (a.label) { case 0: e = t.rejectWithValue, s = t.extra, a.label = 1; case 1: return a.trys.push([1, 3,, 4]), [4, s.api.get('/curriculum/subject-schedule/'.concat(l, '/').concat(c, '/classroom-workload/'))]; case 2: return [2, a.sent().data]; case 3: return (r = a.sent()).message === 'Failed to fetch' ? [2, e({ status: 500, error: 'timeout' })] : [2, e({ status: r.response.status, error: r.response.data.message })]; case 4: return [2]; } })));
            }, new ((a = void 0) || (a = Promise))(((e, t) => { function l(e) { try { o(n.next(e)); } catch (e) { t(e); } } function c(e) { try { o(n.throw(e)); } catch (e) { t(e); } } function o(t) { let s; t.done ? e(t.value) : (s = t.value, s instanceof a ? s : new a(((e) => { e(s); }))).then(l, c); }o((n = n.apply(s, r || [])).next()); }));
        })); const u = (0, o.oM)({
            name: 'subjectsScheduleWorkload',
            initialState: { teachers: { data: void 0, isLoading: !0, error: void 0 }, classRooms: { data: void 0, isLoading: !0, error: void 0 } },
            reducers: {},
            extraReducers(e) {
                e.addCase(i.pending, ((e) => { e.teachers.error = void 0, e.teachers.isLoading = !0; })).addCase(i.fulfilled, ((e, t) => { e.teachers.isLoading = !1, e.teachers.data = t.payload; })).addCase(i.rejected, ((e, t) => { e.teachers.isLoading = !1, e.teachers.error = t.payload; })).addCase(d.pending, ((e) => { e.classRooms.error = void 0, e.classRooms.isLoading = !0; }))
                    .addCase(d.fulfilled, ((e, t) => { e.classRooms.isLoading = !1, e.classRooms.data = t.payload; }))
                    .addCase(d.rejected, ((e, t) => { e.classRooms.isLoading = !1, e.classRooms.error = t.payload; }));
            },
        }); const h = (u.actions, u.reducer); const m = s(9161); const f = s(4809); const v = s(1353); const p = s(5131); const b = s(9250); const j = s(9086); const g = s(5461); const x = s(6458); const y = {
            content: 'Ckv7jjnp', btn: 'RZeZAHzq', exitBtnIcon: 'Obxg7N7B', settings: 'DXRfc3ZM', classRoomsTable: 'xPwT3F5U',
        }; const w = s(1138); const N = {
            title: 'Ea5rEOyu', table: 'hMilNWum', header: 'ZMrrVGQg', cell: 'mpQi9pid', cellEmpty: 'xdoM_eEN', cellBg: 'TkgNJVqq', headerContent: 'iA4w1mp5', row: 'NqRqQ6OM', asideCells: 'w7OfGjdC', cellRotated: 'xcmQa1iZ', cellTimes: 'oKTMpZQZ', cellItemsWrapper: 'Dub5WWBS', cellItem: 'RnqgyCY3', cellItemEmpty: 'ink72s0Y', cellItemFilled: 'hUh8M1F4',
        }; let k = function () { return k = Object.assign || function (e) { for (var t, s = 1, r = arguments.length; s < r; s++) for (const a in t = arguments[s])Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e; }, k.apply(this, arguments); }; const _ = (0, n.memo)(((e) => {
            let t; const s = e.className; const n = e.title; const l = e.data; const c = e.isLoading; const o = e.error; return t = c ? (0, r.jsx)(w.O, { height: 500 }) : o ? (0, r.jsx)(f.xv, {
                theme: f.lg.ERROR, size: f.yH.M, weight: f.fs.SEMIBOLD, className: N.error, children: 'Произошла ошибка при загрузке данных, попробуйте перезагрузить страницу',
            }) : (0, r.jsxs)(r.Fragment, {
                children: [(l == null ? void 0 : l.teachers) && ((l == null ? void 0 : l.teachers.length) ? (0, r.jsxs)(r.Fragment, { children: [(0, r.jsxs)('div', { className: N.header, children: [(0, r.jsx)('div', { className: (0, a.A)(N.cell, {}, [N.cellEmpty]) }), (0, r.jsx)('div', { className: N.headerContent, children: l.teachers.map(((e) => (0, r.jsxs)('div', { className: (0, a.A)(N.cell, {}, [N.cellBg]), children: [e.last_name, ' ', e.first_name, (0, r.jsx)('br', {}), e.middle_name && e.middle_name] }, e.teacher_id))) })] }), (0, r.jsx)('div', { className: N.body, children: l.workload.map(((e) => (0, r.jsxs)('div', { className: N.row, children: [(0, r.jsxs)('div', { className: N.asideCells, children: [(0, r.jsx)('div', { className: (0, a.A)(N.cell, {}, [N.cellRotated, N.cellBg]), children: (0, r.jsxs)('span', { children: [e.dayNameRu, (0, r.jsx)('br', {}), e.date] }) }), (0, r.jsx)('div', { className: (0, a.A)(N.cell, {}, [N.cellItemsWrapper, N.cellTimes]), children: e.class_time.map(((e) => (0, r.jsxs)('div', {className: (0, a.A)(N.cellItem, {}, [N.cellItemEmpty]), children: [e.start_time, " ", "-", " ", e.end_time]}, e.class_time_id))) })] }), l.teachers.map(((t) => (0, r.jsx)('div', { className: (0, a.A)(N.cell, {}, [N.cellItemsWrapper]), children: e.class_time.map(((e) => { let s; return (0, r.jsx)('div', { className: (0, a.A)(N.cellItem, (s = {}, s[N.cellItemFilled] = e.teachers_ids.includes(t.teacher_id), s[N.cellItemEmpty] = !e.teachers_ids.includes(t.teacher_id), s), []) }, e.class_time_id); })) }, t.teacher_id)))] }, e.dayNum))) })] }) : (0, r.jsx)(f.xv, {
                    size: f.yH.L, weight: f.fs.SEMIBOLD, align: f.PH.CENTER, children: 'Отсутствуют сотрудники',
                })), (l == null ? void 0 : l.classrooms) && ((l == null ? void 0 : l.classrooms.length) ? (0, r.jsxs)(r.Fragment, { children: [(0, r.jsxs)('div', { className: N.header, children: [(0, r.jsx)('div', { className: (0, a.A)(N.cell, {}, [N.cellEmpty]) }), (0, r.jsx)('div', { className: N.headerContent, children: l.classrooms.map(((e) => (0, r.jsxs)('div', { className: (0, a.A)(N.cell, {}, [N.cellBg]), children: [e.number && (0, r.jsxs)(r.Fragment, { children: [e.number, (0, r.jsx)('br', {})] }), e.name] }, e.classroom_id))) })] }), (0, r.jsx)('div', { className: N.body, children: l.workload.map(((e) => (0, r.jsxs)('div', { className: N.row, children: [(0, r.jsxs)('div', { className: N.asideCells, children: [(0, r.jsx)('div', { className: (0, a.A)(N.cell, {}, [N.cellRotated, N.cellBg]), children: (0, r.jsxs)('span', { children: [e.dayNameRu, (0, r.jsx)('br', {}), e.date] }) }), (0, r.jsx)('div', { className: (0, a.A)(N.cell, {}, [N.cellItemsWrapper, N.cellTimes]), children: e.class_time.map(((e) => (0, r.jsxs)('div', {className: (0, a.A)(N.cellItem, {}, [N.cellItemEmpty]), children: [e.start_time, " ", "-", " ", e.end_time]}, e.class_time_id))) })] }), l.classrooms.map(((t) => (0, r.jsx)('div', { className: (0, a.A)(N.cell, {}, [N.cellItemsWrapper]), children: e.class_time.map(((e) => { let s; return (0, r.jsx)('div', { className: (0, a.A)(N.cellItem, (s = {}, s[N.cellItemFilled] = e.classroom_ids.includes(t.classroom_id), s[N.cellItemEmpty] = !e.classroom_ids.includes(t.classroom_id), s), []) }, e.class_time_id); })) }, t.classroom_id)))] }, e.dayNum))) })] }) : (0, r.jsx)(f.xv, {
                    size: f.yH.L, weight: f.fs.SEMIBOLD, align: f.PH.CENTER, children: 'Отсутствуют аудитории',
                }))],
            }), (0, r.jsxs)('div', { className: (0, a.A)(N.SubjectsScheduleWorkloadTable, {}, [s]), children: [(0, r.jsx)('div', { className: N.title, children: n }), (0, r.jsx)('div', { className: N.table, children: t })] });
        })); const S = function (e) { let t; return (t = e.subjectsScheduleWorkload) === null || void 0 === t ? void 0 : t.teachers.data; }; const E = function (e) { let t; return (t = e.subjectsScheduleWorkload) === null || void 0 === t ? void 0 : t.teachers.isLoading; }; const R = function (e) { let t; return (t = e.subjectsScheduleWorkload) === null || void 0 === t ? void 0 : t.teachers.error; }; const I = function (e) { let t; return (t = e.subjectsScheduleWorkload) === null || void 0 === t ? void 0 : t.classRooms.data; }; const W = function (e) { let t; return (t = e.subjectsScheduleWorkload) === null || void 0 === t ? void 0 : t.classRooms.isLoading; }; const O = function (e) { let t; return (t = e.subjectsScheduleWorkload) === null || void 0 === t ? void 0 : t.classRooms.error; }; let C = function () { return C = Object.assign || function (e) { for (var t, s = 1, r = arguments.length; s < r; s++) for (const a in t = arguments[s])Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e; }, C.apply(this, arguments); }; const A = (0, n.memo)(((e) => {
            const t = e.className; const s = (0, g.T)(); const l = window.location.pathname; const c = (0, b.s0)(); const o = l.split('/'); const u = o[o.length - 2]; const h = o[o.length - 1]; const w = (0, x.v9)(S); const N = (0, x.v9)(E); const k = (0, x.v9)(R); const A = (0, x.v9)(I); const L = (0, x.v9)(W); const M = (0, x.v9)(O); const T = (0, n.useCallback)((() => { c((0, j.Qb)()); }), [c]); const B = (0, n.useCallback)((() => { s(d([u, h])), s(i([u, h])); }), [s, h, u]); return (0, n.useEffect)((() => { B(); }), [B]), (0, r.jsxs)('div', {
                className: (0, a.A)(y.SubjectsScheduleWorkload, {}, [t]),
                children: [(0, r.jsxs)('div', {
                    className: y.content,
                    children: [(0, r.jsx)(_, {
                        title: 'Нагрузка преподавателей', data: w, isLoading: N, error: k,
                    }), (0, r.jsx)(_, {
                        title: 'Заполненность аудиторий', data: A, isLoading: L, error: M, className: y.classRoomsTable,
                    })],
                }), (0, r.jsxs)('div', {
                    className: y.settings,
                    children: [(0, r.jsxs)(m.zx, {
                        className: y.btn, theme: m.bn.BACKGROUND_GRAY, size: m.qE.XS, onClick: T, children: [(0, r.jsx)(f.xv, { size: f.yH.XS, weight: f.fs.SEMIBOLD, children: 'Выйти' }), (0, r.jsx)(v.J, { className: y.exitBtnIcon, Svg: p.Z })],
                    }), (0, r.jsxs)(m.zx, {
                        size: m.qE.XS, className: y.btn, onClick: B, disabled: N || L, children: [(0, r.jsx)(f.xv, { size: f.yH.XS, weight: f.fs.SEMIBOLD, children: 'Обновить' }), (0, r.jsx)(v.J, { name: v.d.REFRESH })],
                    })],
                })],
            });
        })); const L = {}; let M = function () { return M = Object.assign || function (e) { for (var t, s = 1, r = arguments.length; s < r; s++) for (const a in t = arguments[s])Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e; }, M.apply(this, arguments); }; const T = { subjectsScheduleWorkload: h }; const B = (0, n.memo)(((e) => { const t = e.className; return (0, r.jsx)(c.B, { title: 'LMS - Учебная нагрузка', children: (0, r.jsx)(l.W, { reducers: T, removeAfterUnmount: !0, children: (0, r.jsx)('div', { className: (0, a.A)(L.SubjectsScheduleWorkloadPage, {}, [t]), children: (0, r.jsx)(A, {}) }) }) }); }));
    },
    1150: (e, t, s) => { s.d(t, { W: () => l }); const r = s(5893); const a = s(7294); const n = s(6458); var l = function (e) { const t = e.children; const s = e.reducers; const l = e.removeAfterUnmount; const c = (0, n.oR)(); const o = (0, n.I0)(); return (0, a.useEffect)((() => (Object.entries(s).forEach(((e) => { const t = e[0]; const s = e[1]; c.reducerManager.add(t, s), o({ type: '@INIT '.concat(t, ' reducer') }); })), function () { l && Object.entries(s).forEach(((e) => { const t = e[0]; c.reducerManager.remove(t), o({ type: '@DESTROY '.concat(t, ' reducer') }); })); })), []), (0, r.jsx)(r.Fragment, { children: t }); }; },
}]);
